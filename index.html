<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Encantu's - Sua livraria virtual de indicações literárias" />
  <title>Encantu's - Indicações Literárias</title>
  <link rel="stylesheet" href="cs/style.css">
</head>
<body>
  <header class="topo">
    <div class="topo-content">
      <!-- LADO ESQUERDO: Logo/Mago e Menu -->
      <div class="topo-esquerdo">
          <div class="topo-logo">
          <a href="index.html">
            <img class="topo-imagem" src="imagem/mago.png" alt="Logo Encantu's" />
          </a>
        </div>
        <nav class="topo-menu">
          <a href="cadastro.html">CADASTRO</a>
          <a href="login.html">LOGIN</a>
          <a href="Sobre.html">SOBRE</a>
          
        </nav>
      </div>

      <!-- LADO DIREITO: Busca -->
      <div class="topo-direito">
        <div class="input-container">
          <input
            class="input"
            name="text"
            type="text"
            placeholder="Procure por um livro..."
            id="searchText"
          />
          <div id="suggestions" class="suggestions"></div>
        </div>
      </div>
      <div>     
         <a href="Sobre.html">CATEGORIA</a>
          </div>
    </div>

  </header>

  <!-- CARROSSEL PROMOCIONAL - COM INDICAÇÃO DE ARRASTE -->
  <section class="carrossel-promocional-section">
    <div class="carrossel-promocional">
      <ul class="slides">
        <li class="slide ativo">
          <div class="slide-img" style="background-image: url('imagem/u.png')">
            <!-- Sem conteúdo de texto -->
          </div>
        </li>
        
        <li class="slide">
          <div class="slide-img" style="background-image: url('https://images.unsplash.com/photo-1621351183012-e2f9972dd9bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=1400&h=600&q=80')">
            <!-- Sem conteúdo de texto -->
          </div>
        </li>
        
        <li class="slide">
          <div class="slide-img" style="background-image: url('https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3&auto=format&fit=crop&w=1400&h=600&q=80')">
            <!-- Sem conteúdo de texto -->
          </div>
        </li>
      </ul>
      
      <!-- INDICAÇÃO DE ARRASTE -->
      <div class="indicacao-arraste">
        Arraste para os lados para navegar
      </div>
    </div>
  </section>

  <!-- SEÇÃO DE INDICAÇÕES EM DESTAQUE -->
  <section class="secao-novidades">
    <h2 class="titulo-novidades">Indicações em Destaque</h2>
    
    <div class="grid-livros" id="gridLivros">
      <!-- Os cards de livros serão gerados pelo JavaScript -->
    </div>
  </section>

  <!-- CATEGORIAS DE INDICAÇÕES -->
  <section class="catalogo-categorias">
    <h2 class="catalogo-titulo">CATEGORIAS DE INDICAÇÕES</h2>
    <p class="catalogo-subtitulo">Explore nossas recomendações por gênero literário</p>

    <div class="categoria-container" id="categoriaContainer">
      <!-- As categorias serão geradas pelo JavaScript -->
    </div>
  </section>

  <!-- RODAPÉ -->
  <footer class="rodape">
    <div class="rodape-content">
      <div class="rodape-contato">
        <p> Quer sugerir uma indicação?</p>
        <p>Email: <a href="mailto:encantus1livraria@gmail.com">encantus1livraria@gmail.com</a></p>
        <p> Sua livraria virtual de indicações</p>
      </div>
    </div>
  </footer>

  <script>
    // DADOS DOS LIVROS
    const livros = [
      {
        id: 1,
        titulo: "Um de nós é o próximo (Vol. 2 Um de nós)",
        autor: "Karen M. McManus",
        imagem: "https://m.media-amazon.com/images/I/81WYMklv2pL._SY466_.jpg",
        link: "UM_DE_NOS.HTML"
      },
      {
        id: 2,
        titulo: "The Art of Horizon Zero Dawn",
        autor: " Paul Davies",
        imagem: "https://m.media-amazon.com/images/I/810HInpTcJL._SY425_.jpg",
        link: "Horizon.html"
      },
      {
        id: 3,
        titulo: "HARRY POTTER E O PRISIONEIRO DE AZKABAN",
        autor: "J.K. ROWLING",
        imagem: "imagem/Prisioneiro_de_Azkaban.png",
        link: "PRISIONEIRO_DE_AZKABAN.html"
      },
      {
        id: 4,
        titulo: "HARRY POTTER E O CÁLICE DE FOGO",
        autor: "J.K. ROWLING",
        imagem: "imagem/Cálice_de_Fogo.png",
        link: "CALICE_DE_FOGO.html"
      },
      {
        id: 5,
        titulo: "Declínio de um homem",
        autor: "Osamu Dazai",
        imagem: "https://m.media-amazon.com/images/I/81ZWDEnkQ8L._SY466_.jpg",
        link: "Declinio.html"
      },
      {
        id: 6,
        titulo: "One Piece, Vol. 106",
        autor: "Eiichiro Oda",
        imagem: "https://m.media-amazon.com/images/I/81KuBRfJwxL._SY466_.jpg",
        link: "One_Piece.html"
      },
      {
        id: 7,
        titulo: "O príncipe cruel (Vol. 1 O Povo do Ar",
        autor: "Holly Black",
        imagem: "https://m.media-amazon.com/images/I/81FH6q0EqYS._SY466_.jpg",
        link: "O_príncipe_cruel.html"
      },
      {
        id: 8,
        titulo: "Weak Hero Vol. 1",
        autor: "Kim JS.Seopass",
        imagem: "https://m.media-amazon.com/images/I/81PWk6DUQuL._SY466_.jpg",
        link: "Weak_Hero.html"
      },
      {
        id: 9,
        titulo: "Casas estranhas: Casas estranhas Vol. 1",
        autor: "Uketsu ",
        imagem: "https://m.media-amazon.com/images/I/81-m2B4F9hL._SY466_.jpg",
        link: "Casas_estranhas.html"
      },
      {
        id: 10,
        titulo: "Bungo Stray Dogs Vol. 25",
        autor: "Kafka Asagiri",
        imagem: "https://m.media-amazon.com/images/I/612ECD2GQEL._SY425_.jpg",
        link: "Bungo_Stray_Dogs.html"
      }
    ];

    // CATEGORIAS
    const categorias = [
      {
        nome: "FANTASIA",
        submenu: [
          { texto: "Senhor dos Anéis", link: "aneis.html" },
          { texto: "Crônicas de Nárnia", link: "informacoes/cronicas.html" },
          { texto: "Harry Potter", link: "informacoes/harrypotter.html" }
        ]
      },
      {
        nome: "AVENTURA",
        submenu: [
          { texto: "God of War", link: "god.html" },
          { texto: "Mortal Kombat", link: "kombat.html" },
          { texto: "The Last of Us", link: "Zombi.html" }
        ]
      },
      {
        nome: "ROMANCE",
        submenu: [
          { texto: "Orgulho e Preconceito", link: "informacoes/orgulhopreconceito.html" },
          { texto: "Como Eu Era Antes de Você", link: "informacoes/comoeuera.html" },
          { texto: "A Culpa é das Estrelas", link: "informacoes/culpaestrelas.html" }
        ]
      },
      {
        nome: "SUSPENSE",
        submenu: [
          { texto: "Ilha do Medo", link: "informacoes/ilhadomedo.html" },
          { texto: "A Vila dos Pecados", link: "informacoes/vilapecados.html" },
          { texto: "Garota Exemplar", link: "informacoes/garotaexemplar.html" }
        ]
      },
      {
        nome: "FICÇÃO",
        submenu: [
          { texto: "Interestelar", link: "informacoes/interestelar.html" },
          { texto: "Duna", link: "informacoes/duna.html" },
          { texto: "Matrix", link: "informacoes/matrix.html" }
        ]
      },
      {
        nome: "TERROR",
        submenu: [
          { texto: "Invocação do Mal", link: "informacoes/invocacaomal.html" },
          { texto: "IT - A Coisa", link: "informacoes/it.html" },
          { texto: "Hereditário", link: "informacoes/hereditario.html" }
        ]
      },
      {
        nome: "DRAMA",
        submenu: [
          { texto: "Clube da Luta", link: "informacoes/clubedaluta.html" },
          { texto: "O Curioso Caso de Benjamin Button", link: "informacoes/benjaminbutton.html" },
          { texto: "12 Anos de Escravidão", link: "informacoes/12anos.html" }
        ]
      }
    ];

    // FUNÇÃO PARA GERAR OS CARDS DE LIVROS
    function gerarCardsLivros() {
      const gridLivros = document.getElementById('gridLivros');
      
      livros.forEach(livro => {
        const card = document.createElement('div');
        card.className = 'card-livro';
        card.innerHTML = `
          <div class="livro-imagem-container">
            <img src="${livro.imagem}" alt="${livro.titulo}" class="livro-imagem">
          </div>
          <div class="livro-info">
            <div class="autor-livro">${livro.autor}</div>
            <div class="titulo-livro">${livro.titulo}</div>
            <div class="livro-botoes">
              <a href="${livro.link}" class="btn-informacoes">Ver Informações</a>
            </div>
          </div>
        `;
        gridLivros.appendChild(card);
      });
    }

    // FUNÇÃO PARA GERAR CATEGORIAS
    function gerarCategorias() {
      const categoriaContainer = document.getElementById('categoriaContainer');
      
      categorias.forEach(categoria => {
        const dropdown = document.createElement('div');
        dropdown.className = 'dropdown';
        
        const categoriaItem = document.createElement('div');
        categoriaItem.className = 'categoria-item';
        categoriaItem.textContent = categoria.nome;
        
        const submenu = document.createElement('div');
        submenu.className = 'submenu';
        
        categoria.submenu.forEach(item => {
          const link = document.createElement('a');
          link.href = item.link;
          link.textContent = item.texto;
          submenu.appendChild(link);
        });
        
        dropdown.appendChild(categoriaItem);
        dropdown.appendChild(submenu);
        categoriaContainer.appendChild(dropdown);
      });
    }

    // CARROSSEL PROMOCIONAL - CORRIGIDO
    class Carrossel {
      constructor(container) {
        this.container = container;
        this.slides = container.querySelectorAll('.slide');
        this.indicacaoArraste = container.querySelector('.indicacao-arraste');
        this.indexAtual = 0;
        this.totalSlides = this.slides.length;
        this.intervalo = null;
        this.velocidade = 7000; // 7 SEGUNDOS
        
        // Variáveis para controle de arrasto
        this.arrastando = false;
        this.startX = 0;
        this.currentX = 0;
        this.threshold = 50; // Distância mínima para considerar um arrasto
        
        this.iniciar();
        this.adicionarEventosArrasto();
        this.configurarIndicacao();
      }
      
      iniciar() {
        this.mostrarSlide(this.indexAtual);
        this.iniciarAutoPlay();
      }
      
      mostrarSlide(index) {
        // Remove a classe ativo de todos os slides
        this.slides.forEach(slide => slide.classList.remove('ativo'));
        
        // Adiciona a classe ativo ao slide atual
        this.slides[index].classList.add('ativo');
        this.indexAtual = index;
      }
      
      slideAnterior() {
        let novoIndex = this.indexAtual - 1;
        if (novoIndex < 0) {
          novoIndex = this.totalSlides - 1;
        }
        this.mostrarSlide(novoIndex);
        this.reiniciarAutoPlay();
      }
      
      proximoSlide() {
        let novoIndex = this.indexAtual + 1;
        if (novoIndex >= this.totalSlides) {
          novoIndex = 0;
        }
        this.mostrarSlide(novoIndex);
        this.reiniciarAutoPlay();
      }
      
      iniciarAutoPlay() {
        this.intervalo = setInterval(() => {
          this.proximoSlide();
        }, this.velocidade);
      }
      
      pararAutoPlay() {
        if (this.intervalo) {
          clearInterval(this.intervalo);
          this.intervalo = null;
        }
      }
      
      reiniciarAutoPlay() {
        this.pararAutoPlay();
        this.iniciarAutoPlay();
      }
      
      adicionarEventosArrasto() {
        const container = this.container;
        
        // Eventos de mouse
        container.addEventListener('mousedown', this.iniciarArrasto.bind(this));
        document.addEventListener('mousemove', this.arrastar.bind(this));
        document.addEventListener('mouseup', this.terminarArrasto.bind(this));
        
        // Eventos de touch
        container.addEventListener('touchstart', this.iniciarArrasto.bind(this));
        document.addEventListener('touchmove', this.arrastar.bind(this));
        document.addEventListener('touchend', this.terminarArrasto.bind(this));
        
        // Prevenir comportamento padrão de arrasto
        container.addEventListener('dragstart', (e) => e.preventDefault());
      }
      
      iniciarArrasto(e) {
        this.arrastando = true;
        this.pararAutoPlay();
        
        // Obter a posição inicial do toque/clique
        if (e.type === 'touchstart') {
          this.startX = e.touches[0].clientX;
        } else {
          this.startX = e.clientX;
        }
        
        this.currentX = this.startX;
        this.container.style.cursor = 'grabbing';
        
        // Esconder indicação durante o arrasto
        if (this.indicacaoArraste) {
          this.indicacaoArraste.style.opacity = '0';
        }
      }
      
      arrastar(e) {
        if (!this.arrastando) return;
        
        e.preventDefault();
        
        // Obter a posição atual
        if (e.type === 'touchmove') {
          this.currentX = e.touches[0].clientX;
        } else {
          this.currentX = e.clientX;
        }
      }
      
      terminarArrasto(e) {
        if (!this.arrastando) return;
        
        this.arrastando = false;
        this.container.style.cursor = 'grab';
        
        // Calcular a distância do arrasto
        const diffX = this.startX - this.currentX;
        
        // Verificar se o arrasto foi significativo o suficiente
        if (Math.abs(diffX) > this.threshold) {
          if (diffX > 0) {
            // Arrastou para a esquerda - próximo slide
            this.proximoSlide();
          } else {
            // Arrastou para a direita - slide anterior
            this.slideAnterior();
          }
        }
        
        // Mostrar indicação novamente após o arrasto
        if (this.indicacaoArraste) {
          setTimeout(() => {
            this.indicacaoArraste.style.opacity = '0.8';
          }, 1000);
        }
        
        // Reinicia o auto-play após um tempo
        setTimeout(() => {
          this.reiniciarAutoPlay();
        }, 3000);
      }
      
      configurarIndicacao() {
        // Esconder a indicação após alguns segundos de inatividade
        setTimeout(() => {
          if (this.indicacaoArraste && !this.arrastando) {
            this.indicacaoArraste.style.opacity = '0';
            this.indicacaoArraste.style.transition = 'opacity 1s ease';
          }
        }, 5000);
        
        // Mostrar indicação ao passar o mouse
        this.container.addEventListener('mouseenter', () => {
          if (this.indicacaoArraste) {
            this.indicacaoArraste.style.opacity = '0.8';
          }
        });
        
        this.container.addEventListener('mouseleave', () => {
          if (this.indicacaoArraste && !this.arrastando) {
            setTimeout(() => {
              this.indicacaoArraste.style.opacity = '0';
            }, 1000);
          }
        });
      }
    }

    // FUNÇÃO DE BUSCA DE LIVROS
    function searchBook() {
      const query = document.getElementById("searchText").value.toLowerCase().trim();

      const books = {
        "senhor dos anéis": "aneis.html",
        "crônicas de nárnia": "cronicas.html",
        "mortal kombat": "kombat.html",
        "the last of us": "Zombi.html",
        "god of war": "god.html"
      };

      if (books[query]) {
        window.location.href = books[query];
      } else {
        alert("LIVRO NÃO ENCONTRADO EM NOSSAS INDICAÇÕES!\n\nTente: Senhor dos Anéis,, Crônicas de Nárnia, Mortal Kombat, The Last of Us ou God of War");
      }
    }

    // SUGESTÕES DE BUSCA
    function configurarBusca() {
      const searchInput = document.getElementById('searchText');
      const suggestionsDiv = document.getElementById('suggestions');

      searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();
        suggestionsDiv.innerHTML = '';

        if (query) {
          const books = {
            "senhor dos anéis": "aneis.html",
            "crônicas de nárnia": "cronicas.html",
            "mortal kombat": "kombat.html",
            "the last of us": "Zombi.html",
            "god of war": "god.html"
          };

          const matches = Object.keys(books).filter(book => book.includes(query));
          if (matches.length > 0) {
            matches.forEach(match => {
              const suggestion = document.createElement('div');
              suggestion.className = 'suggestion';
              suggestion.textContent = match;
              suggestion.addEventListener('click', () => {
                searchInput.value = match;
                window.location.href = books[match];
              });
              suggestionsDiv.appendChild(suggestion);
            });
            suggestionsDiv.style.display = 'block';
          } else {
            suggestionsDiv.style.display = 'none';
          }
        } else {
          suggestionsDiv.style.display = 'none';
        }
      });

      searchInput.addEventListener('blur', function() {
        setTimeout(() => {
          suggestionsDiv.style.display = 'none';
        }, 200);
      });

      searchInput.addEventListener('focus', function() {
        if (this.value.trim() && suggestionsDiv.children.length > 0) {
          suggestionsDiv.style.display = 'block';
        }
      });

      // Evento de Enter para busca
      searchInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          searchBook();
        }
      });
    }

    // SCROLL BEHAVIOR PARA HEADER
    function configurarScrollHeader() {
      let lastScroll = 0;
      const topo = document.querySelector('.topo');

      window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;

        if (currentScroll > 100 && currentScroll > lastScroll) {
          topo.style.transform = 'translateY(-100%)';
        } else {
          topo.style.transform = 'translateY(0)';
        }

        lastScroll = currentScroll;
      });
    }

    // INICIALIZAÇÃO
    document.addEventListener('DOMContentLoaded', function() {
      // Gerar conteúdo dinâmico
      gerarCardsLivros();
      gerarCategorias();
      
      // Configurar funcionalidades
      configurarBusca();
      configurarScrollHeader();

      // Inicializar carrossel
      const carrosselPromocional = document.querySelector('.carrossel-promocional');
      if (carrosselPromocional) {
        new Carrossel(carrosselPromocional);
      }

      // Adicionar efeitos de animação dinâmicos nos cards
      const cards = document.querySelectorAll('.card-livro');
      cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.3}s`;
      });

      // Efeitos de digitação no input de busca
      const searchInput = document.getElementById('searchText');
      searchInput.addEventListener('focus', function() {
        this.style.animation = 'shake 0.3s ease';
        setTimeout(() => {
          this.style.animation = '';
        }, 300);
      });
    });
  </script>
</body>
</html>